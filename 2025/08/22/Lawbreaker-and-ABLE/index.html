

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/nju.png">
  <link rel="icon" href="/img/nju.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Passer">
  <meta name="keywords" content="">
  
    <meta name="description" content="Lawbreaker 研究背景 自动驾驶系统（ADS）在上路前需要进行充足的测试，高保真的仿真器（如 LGSVL , CARLA）能够低成本高效地使其在多样化场景下接受检验。尽管已有测试用例的自动生成方法，但这些方法往往只关注“弱”判定标准（例如车辆是否能在无碰撞的情况下到达目的地），而忽略了行程本身是否安全、是否符合交通法规。为此，作者提出了 Lawbreaker ，旨在提供了一套面向驾驶员的丰">
<meta property="og:type" content="article">
<meta property="og:title" content="Lawbreaker and ABLE">
<meta property="og:url" content="https://passer1202.github.io/2025/08/22/Lawbreaker-and-ABLE/index.html">
<meta property="og:site_name" content="Passer&#39;s Homepage">
<meta property="og:description" content="Lawbreaker 研究背景 自动驾驶系统（ADS）在上路前需要进行充足的测试，高保真的仿真器（如 LGSVL , CARLA）能够低成本高效地使其在多样化场景下接受检验。尽管已有测试用例的自动生成方法，但这些方法往往只关注“弱”判定标准（例如车辆是否能在无碰撞的情况下到达目的地），而忽略了行程本身是否安全、是否符合交通法规。为此，作者提出了 Lawbreaker ，旨在提供了一套面向驾驶员的丰">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://passer1202.github.io/image/paper/lawbreaker/LF1.png">
<meta property="og:image" content="https://passer1202.github.io/image/paper/lawbreaker/LF2.png">
<meta property="og:image" content="https://passer1202.github.io/image/paper/lawbreaker/LF3.png">
<meta property="og:image" content="https://passer1202.github.io/image/paper/lawbreaker/LF4.png">
<meta property="og:image" content="https://passer1202.github.io/image/paper/lawbreaker/LF5.png">
<meta property="og:image" content="https://passer1202.github.io/image/paper/lawbreaker/LF6.png">
<meta property="og:image" content="https://passer1202.github.io/image/paper/lawbreaker/LF7.png">
<meta property="og:image" content="https://passer1202.github.io/image/paper/lawbreaker/AF1.png">
<meta property="article:published_time" content="2025-08-22T08:23:00.000Z">
<meta property="article:modified_time" content="2025-08-26T14:50:59.552Z">
<meta property="article:author" content="Passer">
<meta property="article:tag" content="reading">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://passer1202.github.io/image/paper/lawbreaker/LF1.png">
  
  
  
  <title>Lawbreaker and ABLE - Passer&#39;s Homepage</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"passer1202.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.0.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Hengji&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Lawbreaker and ABLE"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-08-22 16:23" pubdate>
          2025年8月22日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          2.4k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          21 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Lawbreaker and ABLE</h1>
            
            
              <div class="markdown-body">
                
                <h2 id="Lawbreaker">Lawbreaker</h2>
<h3 id="研究背景">研究背景</h3>
<p>自动驾驶系统（ADS）在上路前需要进行充足的测试，高保真的仿真器（如 LGSVL , CARLA）能够低成本高效地使其在多样化场景下接受检验。尽管已有测试用例的自动生成方法，但这些方法往往只关注“弱”判定标准（例如车辆是否能在无碰撞的情况下到达目的地），而忽略了行程本身是否安全、是否符合交通法规。为此，作者提出了 <code>Lawbreaker</code> ，旨在提供了一套<code>面向驾驶员</code>的丰富规范语言，用以形式化描述交通法规，并通过<code>模糊测试引擎</code>搜索各种可能的违规方式，以最大化规范覆盖率。</p>
<h3 id="痛点">痛点</h3>
<p>交通法规是现成的，但是针对这些法规对 ADS 进行测试还是有挑战性的：</p>
<ul>
<li>法规通常以<code>自然语言</code>书写，并且是从<code>驾驶员视角</code>进行描述。这使得在现有基于全局视角的规约语言中进行编码时，往往显得不直观。</li>
<li>各国交通法规差异显著，因此需要一种通用且可扩展的规约语言，而不是只能针对某一国家、固定内嵌的判定器。</li>
</ul>
<p>很不幸，现有的描述交通法规的规约方法在可复用性和可扩展性方面均存在局限。比如 rulebooks 侧重于逻辑转换过程，并未提供一种自然的方式来描述法规；而其他形式化方法则与具体测试场景紧密耦合，每当引入新场景时，都必须对法规进行重新定制。一言以蔽之，<strong>要不难写，要不难改</strong>。</p>
<h3 id="解决方案">解决方案</h3>
<p>为了解决以上痛点，作者提出了 <code>Lawbreaker</code> ——一种用于描述交通法规的领域专用语言（DSL），以及一个可据此对自动驾驶系统（ADS）进行自动化测试的框架：</p>
<ul>
<li>允许用户从<code>驾驶员视角</code>而非全局视角更自然地表述交通法规，例如“在路口右转时，驾驶员应礼让行人”。</li>
<li>与任何具体测试场景解耦：同一套法规不仅可以在不同地图上统一解释，还能与任何用于生成测试场景的 DSL 共同使用（这些场景定义了车辆、行人及障碍物在地图中的摆放）。</li>
<li>内置的<code>模糊测试引擎</code>会系统性地搜索各种违规情形，通过尽可能多地覆盖不同违规方式来发现潜在缺陷，而这些未被覆盖的违规情形也能为改进 ADS 提供线索。</li>
</ul>
<blockquote>
<p>领域专用语言是什么？<br>
领域专用语言（Domain-Specific Language，DSL）是一种为了解决特定领域问题而专门设计的“小语言”。与通用编程语言（如 Python、Java、C++）“什么都能写”不同，DSL 只关注某一个细分领域的词汇、概念和规则，因此语法更简洁、表达更贴近业务，普通人也能快速看懂。</p>
<ul>
<li>
<p>例子</p>
<ul>
<li>SQL：专用于“关系数据库查询”的 DSL。</li>
<li>HTML：专用于“网页结构描述”的 DSL。</li>
<li>正则表达式：专用于“文本模式匹配”的 DSL。</li>
<li>LawBreaker 的 DSL：专用于“描述交通法规”的 DSL，让你用接近自然语言的句子（如“在路口右转时应礼让行人”）去告诉计算机一条法规是什么。</li>
</ul>
</li>
<li>
<p>特点</p>
<ul>
<li>词汇和语法高度贴合领域概念，非程序员也能写。</li>
<li>功能受限，但在领域内表达力极强，错误更少。</li>
<li>通常位于“通用语言写的系统”之上，为其提供配置或规则输入。</li>
</ul>
</li>
</ul>
<p>一句话总结：DSL 就是“为特定任务量身定做的小语言”，让领域专家用他们熟悉的话，把需求直接写成计算机能懂的规则。</p>
</blockquote>
<p>如下图所示，用户只需提供一个场景脚本、待测 ADS 和仿真器，以及用 Lawbreaker 语言编写的若干交通法规。随后，模糊测试引擎在仿真器中系统地生成测试用例，尝试诱导 ADS 违反这些法规，从而暴露其设计缺陷。而所有违规行为都会被记录，并可借助仿真器进行可视化回放。</p>
<p><img src="/image/paper/lawbreaker/LF1.png" srcset="/img/loading.gif" lazyload alt="LawBreaker的workflow"></p>
<p>具体的，LawBreaker 的实现包含三部分：</p>
<ul>
<li>基于 ANTLR4 的语法解析器，用于抽取场景描述和相应交通法规中的要素；</li>
<li>模糊测试引擎，用于系统地生成测试用例；</li>
<li>桥接层：将语法解析器、模糊测试引擎、待测 ADS 以及仿真器连接起来，使整套系统能够协同运行。</li>
</ul>
<p>LawBreaker 的架构如下图所示：</p>
<ul>
<li>用于描述场景与情境的<strong>现有</strong> DSL（作者使用的 AVUnit ）；</li>
<li>新提出的、面向驾驶员视角的交通法规描述语言，其语义基础为<code>时序逻辑公式</code>；</li>
<li>LawBreaker 模糊测试算法。</li>
</ul>
<p><img src="/image/paper/lawbreaker/LF2.png" srcset="/img/loading.gif" lazyload alt="LawBreaker架构"></p>
<p>具体的，场景脚本组件首先将给定场景翻译为仿真器所需的 API 调用，为其准备初始测试用例。然后交通法规组件完全从驾驶员视角描述测试预言（testing oracles），无需依赖关于地图或其交通参与者的任何特定知识。最后，模糊测试引擎不断从 ADS 中提取运行轨迹，依据法规规范对其评估，并根据评估结果生成新的测试用例供仿真器执行。</p>
<h3 id="面向驾驶员的描述语言">面向驾驶员的描述语言</h3>
<blockquote>
<ul>
<li>轨迹（trace）：若干场景（scene）按序组成的序列。</li>
<li>场景（scene）：也即状态，各个变量按序组成的序列。</li>
</ul>
</blockquote>
<p>所谓规则，无非是需要满足的较为复杂的布尔表达式，我们使用时序逻辑公式来描述交规，如下图所示：</p>
<p><img src="/image/paper/lawbreaker/LF3.png" srcset="/img/loading.gif" lazyload alt="LawBreaker公式语法"></p>
<p>作者为了描述布尔表达式定义了足足6类变量，用于表示 <code>车辆状态</code>、<code>驾驶状态</code>、<code>道路状态</code>、<code>信号状况</code>、<code>交通状况</code>、<code>地图状况</code> 。关于各类变量的定义此处不再赘述，下面来看一个例子：</p>
<ul>
<li><code>proposition1</code> 给出条件：前方十米有停车线或路口，且信号灯为闪烁的黄灯；</li>
<li><code>proposition2</code> 给出行动：未来两秒内，车速要降到 20 km/h 以下直到 15 米内没有 NPC；</li>
<li><code>law42</code> 则要求 <code>proposition1</code> 为真时，<code>proposition2</code> 永远为真。</li>
</ul>
<blockquote>
<p>《道路交通安全法实施条例》第 42 条: “闪光警告信号灯” 为持续闪烁的黄灯，提示车辆、行人通过时注意瞭望，确认安全后通过。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">proposition1 = trafficLightAhead.color==yellow <br>                &amp; trafficLightAhead.blink <br>                &amp; (stoplineAhead(10) | junctionAhead (10) ); <br>proposition2 = F[0,2]((speed &lt;<span class="hljs-number">20</span>) U ~NearestNPC (<span class="hljs-number">15</span>));<br>law42 = G(proposition1 -&gt; proposition2);<br></code></pre></td></tr></table></figure>
<h3 id="模糊引擎">模糊引擎</h3>
<p>在讨论算法之前，我们首先约定一些符号。</p>
<p>令 $\Phi$ 是一个信号时序逻辑（STL）公式，我们约定 $\Theta(\Phi)$ 表示违背 $\Phi$ 的不同方式对应的约束集合，则 $$\forall \xi \in \Theta(\Phi),\phi \models \xi \Rightarrow \phi \not\models \Phi$$.</p>
<p>对于 $\Theta(\Phi)$ ，计算方式见下图：</p>
<p><img src="/image/paper/lawbreaker/LF4.png" srcset="/img/loading.gif" lazyload alt=""></p>
<blockquote>
<p>$\Theta(\theta_1\mathcal{U}_{\mathcal{I}}\theta_2)$ 被违背有两种情况：</p>
<ul>
<li>$\theta_1$ 和 $\theta_2$ 都不成立之前，一直处于 $\theta_1$ 成立 $\theta_2$ 不成立的状态；</li>
<li>从一开始就 $\theta_1$ 和 $\theta_2$ 都不成立。</li>
</ul>
</blockquote>
<p>其中，$N(\Phi)$ 表示 $\Phi$ 被满足的不同方式对应的约束集合，计算方式如下图所示：</p>
<p><img src="/image/paper/lawbreaker/LF5.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>实践中只需要利用上述规则和布尔恒等式展开计算即可。</p>
<p>下面考虑 $\phi \models \xi$ 的判定问题，作者使用了下图所示的定量语义：</p>
<p><img src="/image/paper/lawbreaker/LF6.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p>一旦有 $\rho(\varphi,\pi,t)\geq 0$ , 我们就说 $\varphi$ 被 $\pi$ 所满足。若不加说明，约定 $\rho(\varphi,\pi)= \rho(\varphi,\pi,0)$。</p>
<p>万事俱备，只欠东风，下面介绍模糊算法：</p>
<p><img src="/image/paper/lawbreaker/LF7.png" srcset="/img/loading.gif" lazyload alt="模糊算法本法"></p>
<p>模糊算法基于<code>遗传算法</code>，$\Theta_r$ 集合表示 $\Theta(\Phi)$ 中还没满足的约束， $Seed_r$ 将约束和场景一一对应，用于记录亲代，$Robust_r$ 记录当前约束离被满足还差多少，$G$ 为子代场景集合，而 $\Gamma$ 为选出的场景，也即测试用例.</p>
<p>关于模糊算法，还有几点需要注意：</p>
<ul>
<li>第20行选子代的时候，$Seed_r$ 数量未必等于子代数 $n$ , 作者选择将 $Seed_r$ 依据 $Robust_r$ 降序排列，然后从前半部分和所有 $Seed$ 各随机抽取一个测试用例作为亲代，然后交换变量，生成子代。</li>
<li>注意“生殖隔离”，不允许不同类型（作者定义了6类变量）变量的值进行交换！</li>
<li>存在“变异”：对连续值，施加高斯变异。</li>
</ul>
<h3 id="结果">结果</h3>
<blockquote>
<p>LawBreaker was able to find 14 violations  of these laws, including 173 test cases that caused accidents.</p>
</blockquote>
<hr>
<h2 id="ABLE">ABLE</h2>
<h3 id="研究背景-2">研究背景</h3>
<p>在 <code>LawBreaker</code> 提出后，研究者们发现其基于遗传算法（GA）的模糊搜索虽然能够覆盖一定范围的交通法规违规情况，但存在明显的<code>早熟收敛</code>问题：LawBreaker 在前 50 次测试就找到了绝大部分违规场景，而后续几百次测试几乎只是在重复相似场景，<strong>效率很低</strong>。这主要是因为不同的交通法规违规情形往往彼此<strong>相距甚远</strong>，需要截然不同的场景设定，而 GA 难以高效探索如此庞大且离散的搜索空间。于是，作者提出了 ABLE（Aims to Break many Laws Efficiently），旨在系统化、覆盖性更强地生成多样化的违规场景，并且避免冗余测试。</p>
<h2 id="核心思路">核心思路</h2>
<p>ABLE 借鉴了 Generative Flow Network（GFlowNet） 的思想，将测试场景生成建模为<code>逐步采样动作</code>的过程。不同于 GA 的“全局变异”，ABLE 更像是“逐步搭积木”，每次给场景加上合适的元素（如一辆 NPC 车的位置、速度），最终形成一个能诱导违规的完整场景。</p>
<p>ABLE 的架构如下图所示：</p>
<p><img src="/image/paper/lawbreaker/AF1.png" srcset="/img/loading.gif" lazyload alt="ABLE架构"></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/reading/" class="print-no-link">#reading</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Lawbreaker and ABLE</div>
      <div>https://passer1202.github.io/2025/08/22/Lawbreaker-and-ABLE/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Passer</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年8月22日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/07/10/LRPC/" title="Lightweight Remote Procedure Call">
                        <span class="hidden-mobile">Lightweight Remote Procedure Call</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
